{% extends "base.html" %}

{% block content %}

<h2>Factorización LU - Método de Doolittle</h2>

<form method="post">
  {% csrf_token %} {{ form.as_p }}
  <button type="submit" class="btn btn-primary">Calcular</button>
</form>

{% if error %}
<div class="alert alert-danger mt-3"><strong>Error:</strong> {{ error }}</div>
{% endif %} {% if success %}
<h3 class="mt-4">Resultados</h3>

<h4 class="mt-3">Proceso de Factorización:</h4>
{% for iter in iterations %}
<h5>Iteración {{ iter.iteracion }}</h5>
<div class="row">
  <div class="col-md-6">
    <h6>Matriz L:</h6>
    <table class="table table-bordered">
      {% for row in iter.L %}
      <tr>
        {% for val in row %}
        <td>{{ val|floatformat:4 }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
  <div class="col-md-6">
    <h6>Matriz U:</h6>
    <table class="table table-bordered">
      {% for row in iter.U %}
      <tr>
        {% for val in row %}
        <td>{{ val|floatformat:4 }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endfor %}

<h4 class="mt-3">Matrices Finales:</h4>
<div class="row">
  <div class="col-md-6">
    <h5>Matriz L:</h5>
    <table class="table table-bordered">
      {% for row in L_final %}
      <tr>
        {% for val in row %}
        <td>{{ val|floatformat:4 }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
  <div class="col-md-6">
    <h5>Matriz U:</h5>
    <table class="table table-bordered">
      {% for row in U_final %}
      <tr>
        {% for val in row %}
        <td>{{ val|floatformat:4 }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
</div>

<h4 class="mt-3">Solución:</h4>
<ul>
  {% for val in solucion %}
  <li>x{{ forloop.counter }} = {{ val|floatformat:6 }}</li>
  {% endfor %}
</ul>
{% endif %}

{% endblock content %}